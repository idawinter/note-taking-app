<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Ida's Notes</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">

    <% if (user) { %>

      <div class="dashboard-content">

        <!-- Profile Picture and Welcome -->
        <div class="dashboard-header">
          <img class="profile-pic" src="<%= user.avatar %>" alt="Profile Picture">
          <% const firstName = user.displayName ? user.displayName.split(' ')[0] : null; %>
          <h1 class="dashboard-title">
            <%= user.displayName ? user.displayName.split(' ')[0] + "'s Notes" : "Your Notes" %>
          </h1>          
                   
        </div>
              

        <!-- Action Buttons -->
        <div class="dashboard-buttons">
          <a href="/notes/new" class="primary-btn">Create a New Note</a>
          <a href="/notes" class="primary-btn">View All Notes</a>
        </div>

        <!-- Last 3 Notes -->
        <div class="recent-notes">
          <h3>Recent Notes</h3>
          <% recentNotes.forEach(note => { %>
            <div class="note-card">
              <h4><a href="/notes/<%= note._id %>"><%= note.title %></a></h4>
              <p><%= note.content.slice(0, 100) %>...</p>
              <small><%= note.category %></small>
            </div>
          <% }) %>
        </div>

        <!-- Note Categories -->
        <div class="note-categories">
          <h3>Note Categories</h3>
          <% categories.forEach(cat => { %>
            <a href="/notes/category/<%= cat %>" class="folder-link"><%= cat %></a>
          <% }) %>
        </div>

        <!-- Preferences and Logout -->
        <div class="bottom-buttons">
          <a href="/dashboard/preferences" class="secondary-btn">Preferences</a>
          <a href="/logout" class="logout-btn">Logout</a>
        </div>

      </div>
    <% } else { %>
      <p>You need to login to view this page.</p>
      <a href="/" class="login-link">Go to Login</a>
    <% } %>

  </div>
</body>
</html>
